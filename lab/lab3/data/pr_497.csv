497,IDEA-165738 Gradle import is very slow in multi-module projects
2016-12-21T11:37:12Z,discuss,"The gradle import resolves source and javadoc JAR files for all artifacts, including project dependency artifacts. These artifacts do not exist in external repositories and so gradle makes many unsuccessful HTTP calls to pom files as well as source and javadoc JARs across all configured repositories every time the project is imported. For large multi-module projects with many external repositories these unsuccessful HTTP calls can take a long time, on the order of many minutes."
2016-12-21T11:37:12Z,discuss,This fix limits the resolved artifacts to those from external dependencies. I have checked that all tests in gradle-tooling-extension-impl still pass.
2016-12-21T15:37:57Z,discuss,With feedback from @oehme (Gradle)
2016-12-21T15:49:34Z,discuss,"I think this change is going to break partial imports, i.e. we have a project with two subprojects Foo and Bar (Foo depends on Bar) and we only import Foo. I think the code that was changed in this commit was making sure that a version of Bar is loaded from the repository instead, so that Foo will still compile. I guess there is no test coverage for this case, so it went undetected. I might be wrong, but it's hard to tell without tests."
2016-12-21T15:49:34Z,discuss,"I think this can be improved though, using one of the following solutions:"
2016-12-21T16:23:15Z,discuss,"This did not produce a compilable project before this change (I just checked it) and so this is a separate unrelated issue. You could argue that the artifacts might be available in a repository, but in general this is not the case for all modules and as soon as you bump the version number it would not work anymore. As far as I see, you can realistically only exclude projects that no included projects depend on."
2016-12-21T16:32:39Z,discuss,"Btw, just to give a sense of scale here:  Before this change, the import time for my project (~80 modules) was 5-10 minutes, after the change it is 20 seconds (with warm daemon)"
2016-12-21T17:10:17Z,discuss,"I didn't know that, thanks for checking! In that case the change is good to go imho."
2017-01-18T12:00:31Z,discuss,@vladsoroka Can you have a look at this PR when you have time? It's currently very painful for me to import my larger projects and it would be great if this could go into 2017.1. Thank you!
2017-01-19T08:33:28Z,discuss,"@ingokegel thanks for the contribution, I'll dig into the issue today"
2017-01-19T20:29:49Z,discuss,Thank you very much!
2017-10-26T02:02:18Z,discuss,"@ingokegel @vladsoroka  is this fix broken in the recent version of IDEA? Just after this PR got merged, gradle refresh project was super fast. But recently when i imported the same project, it became significantly slower and my guess is, this fix is somehow overridden or a similar fix need to happen somewhere else.  Any guess?"
2016-12-21T11:34:31Z,commit,Fixes IDEA-165738 (Gradle import is very slow in multi-module project¡­,github.com/JetBrains/intellij-community/pull/497/commits/bcc22abe0d33d3045c00bf4fc45467ae6d54f9f7
2016-12-21T11:49:58Z,commit,Minor formatting fix,github.com/JetBrains/intellij-community/pull/497/commits/9d2fc185049f3f386b80db9495ea28c31a4b1293
2016-12-21T15:32:11Z,commit,Make it clear that the ComponentArtifactsResult instances of project ¡­,github.com/JetBrains/intellij-community/pull/497/commits/7ae6140cf965767a81227c55b31b4588fc4d8db3
